!function(){var t=function(t,e,n){if(this.bucketSize=t,this.tokensPerInterval=e,"string"==typeof n)switch(n){case"sec":case"second":this.interval=1e3;break;case"min":case"minute":this.interval=6e4;break;case"hr":case"hour":this.interval=36e5;break;case"day":this.interval=864e5}else this.interval=n;this.content=0,this.lastDrip=+new Date};t.prototype={bucketSize:1,tokensPerInterval:1,interval:1e3,content:0,lastDrip:0,accept:function(t){return this.bucketSize?t>this.bucketSize?!1:(this.drip(),t>this.content?!1:(this.content-=t,!0)):!0},drip:function(){if(!this.tokensPerInterval)return this.content=this.bucketSize,!1;var t=+new Date,e=Math.max(t-this.lastDrip,0);if(this.lastDrip=t,e>this.interval){var n=e*(this.tokensPerInterval/this.interval);return this.content=Math.min(this.content+n,this.bucketSize),!0}return!1}},window.TokenBucket=t}(),function(t){var e=function(e,n,i){this.tokenBucket=new t(e,n,i),this.tokenBucket.content=e};e.prototype={tokenBucket:null,accept:function(t){return t>this.tokenBucket.bucketSize?!1:this.tokenBucket.accept(t)}},window.RateLimiter=e}(TokenBucket),function(){angular.module("ngGoogleAnalytics",[]).config(["$httpProvider",function(t){t.defaults.headers.common={},t.defaults.headers.post={},t.defaults.headers.put={},t.defaults.headers.patch={}}]).provider("ga",function(){function t(t,n,i,a){r||(u.tid=t,u.cid=e(),u.aid=n,u.an=i,u.av=a,r=!0)}function e(){var t=window.localStorage.getItem("analytics-cid");return t||(t=window.device&&window.device.uuid||n(),window.localStorage.setItem("analytics-cid",t)),t}function n(){var t=(new Date).getTime(),e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:3&n|8).toString(16)});return e}function i(t){function e(e){return t({url:o,method:"POST",data:e,headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:function(t){var e=[];for(var n in t)e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e.join("&")}})}function n(t){a.accept(1)&&t()}function i(t){r&&n(function(){var n=c({},u);n.t=s.SCREENVIEW,n.cd=t,e(n)})}function h(t,i,a,o){r&&n(function(){var n=c({},u);n.t=s.EVENT,n.ea=t,n.ec=i,a&&(n.el=a),null!=o&&(n.ev=o),e(n)})}function d(t,i,a,o){r&&n(function(){var n=c({},u);n.t=s.TIMING,n.utc=t,n.utv=i,n.utt=a,o&&(n.utl=o),e(n)})}function f(t){l[t]=Date.now()}function v(t,e,n,i){if(l[t]){var a=Date.now()-l[t];e=e||t,d(e,n,a,i),l[t]=null}}return{trackScreenView:i,trackEvent:h,trackTiming:d,startTiming:f,sendTiming:v}}i.$inject=["$http"];var a=new RateLimiter(20,2,1e3),c=angular.extend,r=!1,o="http://www.google-analytics.com/collect",u={v:1,tid:null,cid:null,t:null,ds:"app"},s={PAGEVIEW:"pageview",SCREENVIEW:"screenview",EVENT:"event",TIMING:"timing"},l={};return{init:t,$get:i}}).directive("analyticsOn",["ga",function(t){return{restrict:"A",link:function(e,n,i){var a=i.analyticsOn||"click";n.on(a,function(n){var c=i.analyticsEvent||a,r=i.analyticsCategory||"mobile",o=i.analyticsLabel||"default",u=i.analyticsValue||0;e.$apply(function(){t.trackEvent(c,r,o,u)})})}}}])}();